(this["webpackJsonpwarsawjs-workshop-47-reactive-snake"]=this["webpackJsonpwarsawjs-workshop-47-reactive-snake"]||[]).push([[0],[,,,,,,,,function(e,t,n){e.exports=n(16)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(7),u=n.n(c),o=(n(13),n(2)),i=Object(a.createContext)({gridSize:0,speed:0,paused:!0,increaseSpeed:function(){},pauseGame:function(){},unpauseGame:function(){},setGridSize:function(){}}),s=n(5),l=n(1);function d(){var e,t=Object(a.useContext)(i),n=t.gridSize,r=t.speed,c=t.increaseSpeed,u=t.pauseGame,d=t.paused,m=Object(a.useState)([{x:n/2,y:n/2},{x:n/2,y:n/2+1},{x:n/2,y:n/2+2}]),f=Object(o.a)(m,2),p=f[0],y=f[1],v=Object(a.useState)({x:w(n),y:w(n)}),b=Object(o.a)(v,2),g=b[0],k=b[1],j=function(e){var t=Object(a.useRef)(e);function n(e){"ArrowUp"===e.key?t.current="up":"ArrowDown"===e.key?t.current="down":"ArrowLeft"===e.key?t.current="left":"ArrowRight"===e.key&&(t.current="right")}return Object(a.useEffect)((function(){return document.addEventListener("keydown",n),function(){document.removeEventListener("keydown",n)}}),[]),t.current}("up");!function(e){var t=e.onTick,n=e.speed;Object(a.useEffect)((function(){var e=setInterval(t,n);return function(){clearInterval(e)}}),[n,t])}({speed:r,onTick:function(){if(!d){var e=Object(o.a)(p,1)[0],t=Object(l.a)({},e),n=g.x===t.x&&g.y===t.y;n&&(!function(){do{S()}while(E.length>0);k(O)}(),c()),"up"===j?t.x-=1:"down"===j?t.x+=1:"right"===j?t.y+=1:"left"===j&&(t.y-=1),p.some((function(e){return e.x>10||e.y>10||e.x<0||e.y<0}))&&console.log("UPS! Snake is escaping!!!"),p.find((function(e){return e.x===t.x&&e.y===t.y}))&&alert("UPS! Snake is eating themself!");var a=[t].concat(n?Object(s.a)(p.slice(0,p.length)):Object(s.a)(p.slice(0,p.length-1)));y(a)}}}),e=u,Object(a.useEffect)((function(){function t(t){32===t.keyCode&&e()}return document.addEventListener("keydown",t),function(){document.removeEventListener("keydown",t)}}),[e]);var E,O={};function S(){O={x:w(n),y:w(n)},E=p.filter((function(e){return e.x===O.x&&e.y===O.y}))}function w(e){return Math.floor(Math.random()*e)}return Object(a.useLayoutEffect)((function(){document.querySelector(".fruitCell").style="transition: transform 0.5s; transform: rotate3d(1, 1, 1, 360deg);"}),[g]),{snake:p,fruit:g}}n(14);function m(e){var t=e.gridSize,n=e.fruit,c=e.snake,u=Object(a.useMemo)((function(){return Array.from({length:t}).map((function(e,t){return t}))}),[t]);function o(e,t){return c[0].x===e&&c[0].y===t?"snakeHeadCell":c.some((function(n){return n.x===e&&n.y===t}))?"snakeCell":n.x===e&&n.y===t?"fruitCell":"gridCell"}return r.a.createElement("div",{className:"grid"},u.map((function(e){return r.a.createElement("div",{className:"gridRow",key:e},u.map((function(t){return r.a.createElement("div",{className:o(e,t),key:"".concat(e,"x").concat(t)})})))})))}n(15);function f(){var e=Object(a.useContext)(i),t=e.unpauseGame,n=e.setGridSize,c=e.gridSize;return r.a.createElement("div",{className:"gameMenu"},r.a.createElement("div",{className:"gameMenuOverlay"}),r.a.createElement("div",{className:"gameMenuContent"},r.a.createElement("button",{className:"playButton",onClick:t},"PLAY"),r.a.createElement("div",{className:"hints"},r.a.createElement("p",null,"HINTS"),r.a.createElement("p",null,"use SPACEBAR for pause/unpause game"),r.a.createElement("p",null,"use ARROWS for move snake")),r.a.createElement("form",{className:"gridSizeForm"},r.a.createElement("p",null,"set board game size"),[{value:"10",name:"10x10"},{value:"12",name:"12x12"},{value:"15",name:"15x15"}].map((function(e){return r.a.createElement("label",{key:e.name,htmlFor:e.name},r.a.createElement("input",{type:"radio",id:e.name,value:e.value,onChange:n,checked:c===e.value}),e.name)})))))}function p(){var e=Object(a.useContext)(i),t=e.gridSize,n=e.paused,c=d(),u=c.fruit,o=c.snake;return r.a.createElement(r.a.Fragment,null,n?r.a.createElement(f,null):null,r.a.createElement(m,{gridSize:t,fruit:u,snake:o}))}var y={speed:500,paused:!0,gridSize:"10"};function v(){return y}function b(e,t){var n=t.type,a=t.payload;switch(n){case"increaseSpeed":return Object(l.a)(Object(l.a)({},e),{},{speed:e.speed*a});case"pauseGame":return Object(l.a)(Object(l.a)({},e),{},{paused:!0});case"unpauseGame":return Object(l.a)(Object(l.a)({},e),{},{paused:!1});case"setGridSize":return Object(l.a)(Object(l.a)({},e),{},{gridSize:a});default:throw new Error("unknown game state reducer action type: ".concat(n))}}var g=function(){var e=Object(a.useReducer)(b,y,v),t=Object(o.a)(e,2),n=t[0],c=t[1],u=n.paused,s=n.speed,l=n.gridSize,d=Object(a.useCallback)((function(){c({type:"increaseSpeed",payload:.8})}),[]),m=Object(a.useCallback)((function(){c({type:"pauseGame"})}),[]),f=Object(a.useCallback)((function(){c({type:"unpauseGame"})}),[]);return r.a.createElement(i.Provider,{value:{speed:s,gridSize:l,increaseSpeed:d,paused:u,unpauseGame:f,pauseGame:m,setGridSize:function(e){c({type:"setGridSize",payload:e.target.value})}}},r.a.createElement(p,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(g,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[8,1,2]]]);
//# sourceMappingURL=main.ad414dc5.chunk.js.map